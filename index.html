<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Be My Valentine</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: radial-gradient(circle, #fff0f3 0%, #ffccd5 100%);
  font-family: 'Segoe UI', sans-serif;
}

#ui-layer {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 10;
}

.interactive { pointer-events: auto; }

.glass-card {
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(8px);
  padding: 2rem;
  border-radius: 1.5rem;
  text-align: center;
  box-shadow: 0 8px 32px rgba(255,77,109,0.2);
}

.btn-container {
  display: flex;
  gap: 2rem;
  margin-top: 2rem;
  justify-content: center;
}

#no-btn {
  transition: transform 0.1s ease;
}
</style>
</head>

<body>

<div id="ui-layer">
  <div class="glass-card">
    <h1 id="main-text" class="text-3xl md:text-5xl font-extrabold text-pink-600">
     Will you be my Valentine?
    </h1>

    <div class="btn-container">
      <button id="yes-btn"
        class="interactive bg-pink-500 hover:bg-pink-600 text-white text-xl font-bold px-10 py-4 rounded-full shadow-xl">
        Yes!
      </button>

      <button id="no-btn"
        class="interactive bg-white text-gray-500 text-lg font-bold px-8 py-3 rounded-full shadow-lg border">
        No
      </button>
    </div>
  </div>
</div>

<script>
let scene, camera, renderer, heart, photoMesh;
let isAccepted = false;
let flowerParticles = [];

// ---------- INIT ----------
function init3D() {
  scene = new THREE.Scene();

  camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.z = 5;

  renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(window.devicePixelRatio);
  document.body.appendChild(renderer.domElement);

  scene.add(new THREE.AmbientLight(0xffffff, 1));
  const light = new THREE.PointLight(0xffffff, 1);
  light.position.set(5,5,5);
  scene.add(light);

  createHeart();
  createFlowers();
}

// ---------- HEART ----------
function createHeart() {
  const shape = new THREE.Shape();
  shape.moveTo(0.5,0.5);
  shape.bezierCurveTo(0.5,0.5,0.4,0,0,0);
  shape.bezierCurveTo(-0.6,0,-0.6,0.7,-0.6,0.7);
  shape.bezierCurveTo(-0.6,1.1,-0.3,1.5,0.5,1.9);
  shape.bezierCurveTo(1.3,1.5,1.6,1.1,1.6,0.7);
  shape.bezierCurveTo(1.6,0.7,1.6,0,1,0);
  shape.bezierCurveTo(0.7,0,0.5,0.5,0.5,0.5);

  const geo = new THREE.ExtrudeGeometry(shape,{
    depth:0.4,
    bevelEnabled:true,
    bevelSize:0.1,
    bevelThickness:0.1
  });

  const mat = new THREE.MeshPhongMaterial({ color:0xff4d6d, shininess:120 });
  heart = new THREE.Mesh(geo, mat);
  heart.rotation.z = Math.PI;
  heart.scale.set(1.6,1.6,1.6);
  scene.add(heart);

  loadImage();
}

// ---------- IMAGE INSIDE HEART ----------
function loadImage() {
  const loader = new THREE.TextureLoader();
  const texture = loader.load("ff8489ae-cca2-466f-bf29-7cab8dc18f17.png");

  const geo = new THREE.PlaneGeometry(1.3,1.8);
  const mat = new THREE.MeshBasicMaterial({
    map:texture,
    transparent:true,
    opacity:0,
    side:THREE.DoubleSide
  });

  photoMesh = new THREE.Mesh(geo, mat);
  photoMesh.position.set(0.5,0.85,0.25);
  photoMesh.rotation.z = Math.PI;
  heart.add(photoMesh);
}

// ---------- FLOWERS ----------
function createFlowers() {
  const c = document.createElement("canvas");
  c.width=64; c.height=64;
  const ctx=c.getContext("2d");
  ctx.font="48px serif";
  ctx.fillText("üå∏",6,50);

  const tex = new THREE.CanvasTexture(c);
  const mat = new THREE.SpriteMaterial({ map:tex });

  for(let i=0;i<40;i++){
    const s=new THREE.Sprite(mat);
    s.position.set((Math.random()-0.5)*15,Math.random()*10,(Math.random()-0.5)*15);
    s.scale.set(0.4,0.4,1);
    scene.add(s);
    flowerParticles.push(s);
  }
}

// ---------- ANIMATE ----------
function animate(){
  requestAnimationFrame(animate);

  heart.rotation.y += isAccepted ? 0.04 : 0.012;
  heart.position.y = Math.sin(Date.now()*0.002)*0.2;

  if(isAccepted && photoMesh.material.opacity<1){
    photoMesh.material.opacity += 0.02;
  }

  flowerParticles.forEach(f=>{
    f.position.y -= isAccepted ? 0.06 : 0.02;
    if(f.position.y<-6) f.position.y=8;
  });

  renderer.render(scene,camera);
}

// ---------- UI ----------
function setupUI(){
  const yes=document.getElementById("yes-btn");
  const no=document.getElementById("no-btn");
  const text=document.getElementById("main-text");

  yes.onclick=()=>{
    isAccepted=true;
    yes.style.display="none";
    no.style.display="none";
    text.innerHTML="I Love You ‚ù§Ô∏è<br><span class='text-xl'>Forever & Always</span>";
    heart.material.color.setHex(0xff0033);
    heart.scale.set(3.2,3.2,3.2);
  };

  window.addEventListener("mousemove",(e)=>{
    if(isAccepted) return;
    const r=no.getBoundingClientRect();
    const dx=e.clientX-(r.left+r.width/2);
    const dy=e.clientY-(r.top+r.height/2);
    if(Math.hypot(dx,dy)<120){
      no.style.transform=`translate(${Math.random()*200-100}px,${Math.random()*200-100}px)`;
    }
  });
}

// ---------- RESIZE ----------
window.onresize=()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
};

// ---------- START ----------
window.onload=()=>{
  init3D();
  setupUI();
  animate();
};
</script>

</body>
</html>
